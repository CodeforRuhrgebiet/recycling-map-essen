"use strict";var apiUrl="./data/features.json",req=new XMLHttpRequest;req.onreadystatechange=function(){if(4==req.readyState&&200==req.status){var e=JSON.parse(req.responseText);renderMap(e)}},req.open("GET",apiUrl,!0),req.send();var renderMap=function(e){var a=e.elements,t=(e.generator,e.osm3s,L.map("recycling-map").setView([51.46,7.02],13));L.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',maxZoom:18}).addTo(t);var r=getGeoJSONLayer(a).features,o=function(e){var a="yes"===e["recycling:glass"]?"glass":"other";return"leaflet-map__feature leaflet-map__feature--"+a};L.geoJSON(r,{pointToLayer:function(e,a){return L.circleMarker(a,{className:o(e.properties)})}}).addTo(t)},getGeoJSONLayer=function(e){var a={type:"FeatureCollection",features:[]};return e.map(function(e){a.features.push({type:"Feature",geometry:{type:"Point",coordinates:[e.lon,e.lat]},properties:e.tags})}),a};
